<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" 
			   xmlns:terraview="com.apptinic.terraview.*"
			   minWidth="955" minHeight="600" backgroundColor="#000000"
			   creationComplete="onStartup()">
	<fx:Style source="other.css" />
	
	<!--<s:Group width="100%" height="100%" >
		<s:Group x="102" y="212" left="10" bottom="10" right="10">
			<terraview:GameStats id="gameStateStats" width="231" height="173" x="72" y="139" />
			<s:SkinnableContainer id="otehr" width="108" height="81" x="25" y="0"  skinClass="com.apptinic.terraview.ZionCellSkin">
				<s:Label text="yes"  x="64" y="10"/>
				
			</s:SkinnableContainer>
			<s:SkinnableContainer id="itemStats" width="108" height="81" y="91" skinClass="com.apptinic.terraview.ZionCellSkin">
				<s:Label text="yes"  x="64" y="10"/>
				
			</s:SkinnableContainer>
			<terraview:PlaybackControls id="playbackControls" skinClass="com.apptinic.terraview.LongHexSkin"  right="0" left="296" height="60" y="252"/>
		</s:Group>
		
		<s:Group x="636" y="100" right="10" top="10">
			<s:Button id="avatarButton" width="108" height="81" x="0" y="0" icon="@Embed('/com/apptinic/terraview/test-icon.png')" skinClass="com.apptinic.terraview.ZionButtonSkin"/>
			<s:Button id="settingsButton" width="108" height="81" x="90" y="62" skinClass="com.apptinic.terraview.ZionButtonSkin"/>
		</s:Group>
		<terraview:Globe id="globe" width="462" height="462" x="267" y="98"/>
		
	</s:Group>-->
	<s:Button label="test" click="test()"/>
	<fx:Declarations>
		<s:RemoteObject id="sro" source="Play" endpoint="http://localhost:3000/amf" destination="RubyAMF"/>
	</fx:Declarations>
	
	
<fx:Script>
<![CDATA[
	import com.apptinic.terraview.TruncatedIcosahedron;
	import com.apptinic.terraview.ZionCellSkin;
	import com.apptinic.util.RequestQueue;
	import com.apptinic.util.RequestQueueEvent;
	
	import mx.rpc.events.ResultEvent;
	
protected var rq:RequestQueue;
	
protected function onStartup():void{
	rq = new RequestQueue();
	rq.addEventListener(RequestQueueEvent.RESULT, onResult);
}
	
public function test():void{
	//sro.history({id:1});
	//sro.addEventListener(ResultEvent.RESULT,onResult);
	//sro.test({bullshit:true});
	var params:Object = {id:1};
	rq.addRequest("history","Play",params);
}
	
protected function onResult(event:RequestQueueEvent):void{
	trace("got back"); 
	trace("omg yay!");
}

]]>
</fx:Script>
</s:Application>
